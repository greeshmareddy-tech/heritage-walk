<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CompanionChat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f0f4f8;
        transition: background 0.3s, color 0.3s;
    }

    header {
        background: #0277bd;
        color: white;
        padding: 15px;
        text-align: center;
        font-size: 26px;
        font-weight: bold;
    }

    .container {
        padding: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }

    .box {
        background: white;
        padding: 20px;
        width: 320px;
        border-radius: 10px;
        box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }

    h2 {
        margin-top: 0;
        color: #01579b;
    }

    button {
        background: #0277bd;
        color: white;
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        margin-top: 8px;
    }

    button:hover {
        background: #0288d1;
    }

    input, textarea {
        width: 100%;
        padding: 10px;
        margin-top: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
        font-size: 16px;
    }

    .message {
        background: #e1f5fe;
        padding: 10px;
        margin: 8px 0;
        border-radius: 6px;
    }

    /* Dark Mode */
    .dark {
        background: #1e1e1e;
        color: white;
    }
    .dark header { background: #000; }
    .dark .box { background: #2c2c2c; color: white; }
    .dark .message { background: #424242; color: white; }
</style>
</head>

<body>

<header>CompanionChat – Elderly Support Platform</header>

<div style="text-align:center; margin:10px;">
    <button onclick="toggleDarkMode()">Toggle Dark/Light Mode</button>
</div>

<div class="container">

    <!-- Messaging -->
    <div class="box">
        <h2>Messages</h2>
        <textarea id="messageInput" placeholder="Type a message..."></textarea>
        <button onclick="sendMessage()">Send</button>
        <div id="messageList"></div>
    </div>

    <!-- Reminders -->
    <div class="box">
        <h2>Reminders</h2>
        <input id="reminderText" placeholder="Reminder (e.g., Take medicine)">
        <input id="reminderTime" type="time">
        <button onclick="addReminder()">Add Reminder</button>
        <ul id="reminderList"></ul>
    </div>

    <!-- Activity Log -->
    <div class="box">
        <h2>Daily Activity Log</h2>
        <textarea id="logInput" placeholder="Write activity..."></textarea>
        <button onclick="addLog()">Add to Log</button>
        <div id="logList"></div>
    </div>

    <!-- Optional Enhancements -->
    <div class="box">
        <h2>Enhancements</h2>

        <button onclick="speakReminder()">Voice Reminder Demo</button>

        <p style="margin-top:10px;">Video Call Placeholder:</p>
        <iframe width="100%" height="180" src="https://www.youtube.com/embed/21X5lGlDOfg"></iframe>
    </div>

</div>

<script>
// ---------------- MESSAGING ----------------
function sendMessage() {
    let msg = document.getElementById("messageInput").value;
    if (msg.trim() === "") return;

    let messages = JSON.parse(localStorage.getItem("messages") || "[]");
    messages.push(msg);
    localStorage.setItem("messages", JSON.stringify(messages));

    document.getElementById("messageInput").value = "";
    loadMessages();
}

function loadMessages() {
    let messages = JSON.parse(localStorage.getItem("messages") || "[]");
    let box = document.getElementById("messageList");
    box.innerHTML = "";
    messages.forEach(m => {
        box.innerHTML += `<div class="message">${m}</div>`;
    });
}

// ---------------- REMINDERS ----------------
function addReminder() {
    let text = document.getElementById("reminderText").value;
    let time = document.getElementById("reminderTime").value;

    if (text.trim() === "" || time === "") return;

    let reminders = JSON.parse(localStorage.getItem("reminders") || "[]");
    reminders.push({ text, time });
    localStorage.setItem("reminders", JSON.stringify(reminders));

    loadReminders();
}

function loadReminders() {
    let reminders = JSON.parse(localStorage.getItem("reminders") || "[]");
    let list = document.getElementById("reminderList");
    list.innerHTML = "";

    reminders.forEach(r => {
        list.innerHTML += `<li><b>${r.time}</b> – ${r.text}</li>`;
    });
}

// Voice reminder demo
function speakReminder() {
    let msg = new SpeechSynthesisUtterance("This is your reminder. Please check your schedule.");
    speechSynthesis.speak(msg);
}

// ---------------- ACTIVITY LOG ----------------
function addLog() {
    let text = document.getElementById("logInput").value;
    if (text.trim() === "") return;

    let logs = JSON.parse(localStorage.getItem("logs") || "[]");
    logs.push(text);
    localStorage.setItem("logs", JSON.stringify(logs));

    document.getElementById("logInput").value = "";
    loadLogs();
}

function loadLogs() {
    let logs = JSON.parse(localStorage.getItem("logs") || "[]");
    let box = document.getElementById("logList");
    box.innerHTML = "";
    logs.forEach(l => {
        box.innerHTML += `<div class="message">${l}</div>`;
    });
}

// ---------------- DARK MODE ----------------
function toggleDarkMode() {
    document.body.classList.toggle("dark");
}

// ---------------- LOAD ALL DATA ON START ----------------
window.onload = () => {
    loadMessages();
    loadReminders();
    loadLogs();
};
</script>

</body>
</html>
